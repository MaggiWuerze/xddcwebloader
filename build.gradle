/*
 * This file was generated by the Gradle "init" task.
 */

plugins {
    id 'java'
    id 'maven-publish'
    id 'checkstyle'
    id ("com.github.node-gradle.node") version "3.0.1"
    id "org.springframework.boot" version "2.0.1.RELEASE"
}

repositories {
    mavenCentral()
    maven { url = uri("https://jitpack.io") }
}

node {

}

bootJar {
    mainClassName = 'de.maggiwuerze.xdccloader.XdccloaderApplication'
}

dependencies {
    //SPRING
    implementation('org.springframework.boot:spring-boot-starter-data-rest:2.7.2')
    implementation('org.springframework.boot:spring-boot-starter-security:2.7.2')
    implementation('org.springframework.boot:spring-boot-starter-thymeleaf:2.7.2')
    implementation('org.springframework.boot:spring-boot-starter-web:2.7.2')
    implementation('org.springframework.boot:spring-boot-starter-tomcat:2.7.2')
    implementation('org.springframework.boot:spring-boot-starter-data-jpa:2.7.2')
    implementation('org.springframework.boot:spring-boot-devtools:2.7.2')
    implementation('org.springframework.boot:spring-boot-starter-websocket:2.7.2')
    implementation('org.springframework.boot:spring-boot-starter-validation:2.7.2')
    testImplementation('org.springframework.boot:spring-boot-starter-test:2.7.2')

    // JAX-B dependencies for JDK 9+
    implementation "jakarta.xml.bind:jakarta.xml.bind-api:2.3.2"
    implementation "org.glassfish.jaxb:jaxb-runtime:2.3.2"

    //LOMBOK
    compileOnly('org.projectlombok:lombok:1.18.24')
    annotationProcessor('org.projectlombok:lombok:1.18.24')
    testCompileOnly('org.projectlombok:lombok:1.18.24')
    testAnnotationProcessor('org.projectlombok:lombok:1.18.24')

    //DATABASE
    implementation('org.postgresql:postgresql:42.3.6')
    implementation('mysql:mysql-connector-java:8.0.29')
    runtimeOnly('com.h2database:h2:2.1.214')

    //UTILS
    implementation("com.github.pircbotx:pircbotx:master-SNAPSHOT")
    implementation("commons-io:commons-io:2.11.0")

    //WEBJARS
    implementation('org.webjars:webjars-locator-core:0.52')
    implementation("org.webjars:jquery:3.6.0")
    implementation('org.webjars:bootstrap:5.1.3')
    implementation('org.webjars:font-awesome:6.1.2')
}

group = "de.maggiwuerze"
version = "0.5.0-SNAPSHOT"
description = "xdccloader"

publishing {
    publications.create("maven", MavenPublication) {
        from(components["java"])
    }
}

tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}

tasks.withType(Checkstyle) {
    reports {
        xml.required = false
        html.required = true
        html.enabled = true
    }
}

task buildReactApp(type: NodeTask, dependsOn: "npmInstall") {
    script = project.file('node_modules/webpack/bin/webpack.js')
    args = [
        '--mode', 'development'
    ]
}

processResources.dependsOn 'buildReactApp'
clean.delete << file('node_modules')
clean.delete << file('src/main/resources/static/built')